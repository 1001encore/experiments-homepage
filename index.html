<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onay Gerekli</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .confirmation-box {
            background-color: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-width: 600px;
            text-align: left;
        }
        .confirmation-box h3 {
            /*color: #dc3545;  Red for warning */
            margin-top: 0;
            margin-bottom: 20px;
        }
        .confirmation-box p {
            margin-bottom: 25px;
            font-size: 1.1em;
        }
        .confirmation-form {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
             text-align: left; /* Align form elements left */
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .form-group input[type="text"] {
            width: calc(100% - 22px); /* Adjust for padding and border */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }
        /* Style for input when it's required and invalid */
        .form-group input:required:invalid:not(:placeholder-shown),
        .form-group input:required:invalid:focus {
            border-color: #dc3545; /* Red border for invalid */
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }
         /* Style for input when it's valid */
        .form-group input:valid:not(:placeholder-shown) {
            border-color: #28a745; /* Green border for valid */
             box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px; /* Space above buttons */
        }
        .confirm-button, .cancel-button {
            display: inline-block;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease, opacity 0.3s ease;
             cursor: pointer;
             border: none;
             font-size: 1em;
        }
        .confirm-button {
            background-color: #28a745; /* Green */
            color: white;
        }
         /* Style for the disabled button state */
        .confirm-button:disabled {
            background-color: #ccc; /* Greyed out */
            cursor: not-allowed;
            opacity: 0.7;
        }

        .confirm-button:not(:disabled):hover { /* Apply hover only when NOT disabled */
            background-color: #218838;
        }

        .cancel-button {
            background-color: #6c757d; /* Grey */
            color: white;
        }
        .cancel-button:hover {
            background-color: #5a6268;
        }
         .confirm-button:active, .cancel-button:active {
             opacity: 0.8;
         }

        #longForm {
            overflow-y: scroll;
            height: 500px;
            margin: 5px;
            padding-bottom: 15px;
        }

    </style>
</head>
<body>

    <div class="confirmation-box">
        <div id="longForm">
            <h3>BİLGİLENDİRİLMİŞ GÖNÜLLÜ OLUR FORMU</h3>
            <h4>ÇALIŞMANIN ADI:</h4> <p>İnhibisyon Yeteneği İle Yönlendirilmiş Unutma Düzeyi Arasında Bir İlişki Var mıdır?</p>
            <p>Aşağıda bilgileri yer almakta olan bir araştırma çalışmasına katılmanız istenmektedir. Çalışmaya katılıp katılmama kararı tamamen size aittir. Katılmak isteyip istemediğinize karar vermeden önce araştırmanın neden yapıldığını, bilgilerinizin nasıl kullanılacağını, çalışmanın neleri içerdiğini,  olası yararları ve risklerini ya da rahatsızlık verebilecek yönlerini anlamanız önemlidir. Lütfen aşağıdaki bilgileri dikkatlice okumak için zaman ayırınız. Eğer çalışmaya katılma kararı verirseniz, Çalışmaya Katılma Onayı Formu’nu imzalayınız. Çalışmadan herhangi bir zamanda ayrılmakta özgürsünüz. Araştırmada kullanılacak tüm malzemeler ve yapılabilecek tüm harcamalar araştırmacı tarafından karşılanacaktır.</p>
            <h4>ÇALIŞMANIN KONUSU VE AMACI:</h4> <p>Bu çalışma, Üsküdar Üniversitesi'nde doktora tezi kapsamında yürütülecek deneysel bir araştırmadır. Bu araştırmanın amacı, bireylerin inhibisyon yeteneği ile yönlendirilmiş unutma düzeyleri arasındaki ilişkinin deneysel yöntemlerle incelenmesidir.</p>
            <h4>ÇALIŞMA İŞLEMLERİ:</h4> <p>Araştırma kapsamında katılımcılara aşağıdaki psikolojik testler uygulanacaktır: Stroop Testi, İz Sürme Testi (Trail Making Test), Yönlendirilmiş Unutma Görevi.
Bu testlerin uygulanması yaklaşık olarak 25–30 dakika sürecektir. Tüm uygulamalar bireysel olarak, uygun ve güvenli bir ortamda gerçekleştirilecektir.
</p>
            <h4>ÇALIŞMAYA KATILMAMIN OLASI YARARLARI NELERDİR? </h4> <p>Araştırmaya katılım sonucunda doğrudan bir yarar sağlanmayabilir, ancak çalışma psikoloji bilim alanına katkıda bulunacaktır.</p>
            <h4>KİŞİSEL BİLGİLERİM NASIL KULLANILACAK?</h4> <p>Katılımcılardan elde edilen tüm bilgiler gizli tutulacak ve yalnızca bilimsel amaçla kullanılacaktır. Kişisel kimlik bilgileri hiçbir şekilde üçüncü kişilerle paylaşılmayacaktır. Veriler analiz edilirken katılımcılar anonimleştirilmiş şekilde tanımlanacaktır. Bu araştırmanın katılımcılar için bilinen herhangi bir fiziksel ya da psikolojik riski bulunmamaktadır. </p>
            <h4>SORU VE PROBLEMLER İÇİN BAŞVURULACAK KİŞİLER :</h4> <p>1.	Araştırmacı: Uzman Klinik Psikolog Lale ALKIŞ Üsküdar Üniversitesi, [Sosyal Bilimler Fakültesi], [Psikoloji], Doktora Öğrencisi</p> <p>2.	Danışman: Prof. Dr. Hıdır İlyas GÖZ Üsküdar Üniversitesi Öğretim Üyesi, Psikoloji Doktora Bölüm Başkanı</p>
            <h3>Çalışmaya Katılma Onayı</h3> <p>Bu araştırmaya dair yukarıda belirtilen bilgileri okudum ve anladım Yukarıdaki bilgileri ilgili araştırmacı ile ayrıntılı olarak tartıştım ve kendisi bütün sorularımı cevapladı. Bu bilgilendirilmiş olur belgesini okudum ve anladım. Katılımımın gönüllü olduğunu, istediğim zaman herhangi bir gerekçe göstermeksizin çalışmadan çekilebileceğimi biliyorum. Bu araştırmaya katılmayı kabul ediyor ve bu onay belgesini kendi hür irademle imzalıyorum. Bu onay, ilgili hiçbir kanun ve yönetmeliği geçersiz kılmaz. Katılımcı onam formunun bir örneğini talep edebileceğim bilgisi tarafıma verildi. Gönüllü olarak katılmayı kabul ediyorum.</p>
        </div>
        <form id="confirmationForm" class="confirmation-form">
            <div class="form-group">
                <label for="userName" style="margin-top: 20px;">Lütfen Ad-Soyadınızı Giriniz:</label>
                <input type="text" id="userName" name="userName" required>
            </div>

             <div class="form-group">
                <label for="telNumber">Lütfen Telefon Numaranızı Giriniz:</label>
                <input type="text" id="telNumber" name="telNumber" required placeholder="örn. 123-456-7890"> <!-- Updated placeholder -->
            </div>

            <!-- Add more form fields here as needed -->

             <div class="button-container">
                 <!-- Button starts disabled -->
                 <button type="submit" class="confirm-button" id="proceedButton" disabled>Okudum ve Kabul Ediyorum</button>
                 <a href="https://1001encore.github.io/experiments-homepage/home.html" class="cancel-button">İptal</a>
             </div>
        </form>


    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const targetPage = "https://1001encore.github.io/experiments-homepage/home.html";
        const confirmationForm = document.getElementById('confirmationForm');
        const proceedButton = document.getElementById('proceedButton');
        const userNameInput = document.getElementById('userName');
        const telNumberInput = document.getElementById('telNumber');

        // Function to check if the form is valid
        function checkFormValidity() {
            // Check if userName is not empty (after trimming whitespace)
            const isNameFilled = userNameInput.value.trim() !== '';

            // Get the cleaned value (digits + potential leading +)
            const cleanedTelValue = telNumberInput.value.replace(/[^\d+]/g, '');
            // Count digits after potential +
            const digitCount = cleanedTelValue.replace(/\+/g, '').length;

            // Phone is valid if it's not empty AND has at least 10 digits
            const isTelValid = telNumberInput.value.trim() !== '' && digitCount >= 10;


            // Form is valid if both name is filled and telephone is valid
            return isNameFilled && isTelValid;
        }

        // --- Auto-formatting for telephone number ---
        telNumberInput.addEventListener('input', function() {
            let value = telNumberInput.value;
            const oldValueLength = value.length;
            const oldCursorPosition = telNumberInput.selectionStart;

            // Remove non-digits, but allow a leading '+'
            let cleanedValue = value.replace(/[^\d+]/g, '');
            if (cleanedValue.startsWith('+') && cleanedValue.length > 1) {
                 cleanedValue = '+' + cleanedValue.substring(1).replace(/\D/g, ''); // Keep the first +, remove other non-digits
            } else {
                 cleanedValue = cleanedValue.replace(/\D/g, ''); // Remove all non-digits if no leading +
            }


            let formattedValue = '';
            let tempDigits = cleanedValue.replace(/\+/g, ''); // Get digits only

            if (cleanedValue.startsWith('+')) {
                formattedValue += '+';
            }


            if (tempDigits.length > 0) {
                formattedValue += tempDigits.substring(0, Math.min(3, tempDigits.length));
                if (tempDigits.length > 3) {
                    formattedValue += '-';
                    formattedValue += tempDigits.substring(3, Math.min(6, tempDigits.length));
                    if (tempDigits.length > 6) {
                         formattedValue += '-';
                         formattedValue += tempDigits.substring(6, Math.min(10, tempDigits.length));
                         // Stop after 10 digits for basic formatting
                    }
                }
            }

            telNumberInput.value = formattedValue;

             // --- Restore Cursor Position ---
             // This is a simplified attempt and might not be perfect in all cases
            const newValueLength = telNumberInput.value.length;
            const lengthDiff = newValueLength - oldValueLength;
            const newCursorPosition = oldCursorPosition + lengthDiff;

            // Adjust cursor position if it landed inside a newly added dash
            if (lengthDiff > 0 && newCursorPosition > 0) {
                 // Check if the character *before* the new cursor position is a dash
                 // and the old cursor position was *before* where the dash was added
                if (telNumberInput.value[newCursorPosition - 1] === '-' && oldCursorPosition <= (newCursorPosition - 1 - lengthDiff) ) {
                     telNumberInput.setSelectionRange(newCursorPosition + 1, newCursorPosition + 1);
                } else {
                     telNumberInput.setSelectionRange(newCursorPosition, newCursorPosition);
                }
            } else {
                telNumberInput.setSelectionRange(newCursorPosition, newCursorPosition);
            }


            // --- Update Button State After Formatting ---
            proceedButton.disabled = !checkFormValidity();
        });

        // --- Initial State and Event Listeners ---
        // Disable the button initially (also set in HTML)
        proceedButton.disabled = true;


        // If a target page is found, set up the form submission and input listeners
        if (targetPage) {
            // Add event listener to the name input field
            userNameInput.addEventListener('input', function() {
                proceedButton.disabled = !checkFormValidity();
            });

            // The telNumberInput listener is already defined above for formatting and validation


            // Add submit listener to the form
            confirmationForm.addEventListener('submit', function(event) {
                // Only proceed if the form is valid (button should already be enabled)
                if (!checkFormValidity()) {
                    event.preventDefault();
                    return;
                }

                event.preventDefault(); // Prevent the default form submission

                // Collect form data
                const formData = new FormData(confirmationForm);
                const dataToStore = {};
                formData.forEach((value, key) => {
                    dataToStore[key] = value;
                });

                // Store data in sessionStorage as a JSON string
                sessionStorage.setItem('confirmationFormData', JSON.stringify(dataToStore));

                // Redirect to the target page
                window.location.href = targetPage;
            });

            // Check validity on page load in case fields are pre-filled by the browser
            proceedButton.disabled = !checkFormValidity();


        } else {
            // If no target is specified, handle the invalid link case
            proceedButton.disabled = true;
            proceedButton.textContent = 'Invalid Link';
            proceedButton.style.backgroundColor = '#ccc';
            proceedButton.style.cursor = 'not-allowed';
            confirmationForm.style.display = 'none';
             const errorMsg = document.createElement('p');
             errorMsg.style.color = 'red';
             errorMsg.textContent = 'Error: Target page not specified.';
             confirmationForm.parentElement.insertBefore(errorMsg, confirmationForm);
        }
    </script>

</body>
</html>
