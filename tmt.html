<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> İz Sürme Testi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .node {
            position: absolute;
            width: 65px; /* Slightly wider for longer text */
            height: 65px; /* Slightly taller */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s, border-color 0.2s;
            text-align: center;
            font-size: 1rem; /* Adjust font size if needed */
            line-height: 1.1; /* Adjust line height */
            padding: 2px; /* Add padding for text */
            box-sizing: border-box; /* Include padding and border in element's total width and height */
        }

        #test-area {
            position: relative;
            width: 100%;
            height: 80vh; /* Increased height slightly */
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            overflow: hidden;
            margin: 1rem 0;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            pointer-events: none;
        }

        .node-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .error-shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .highlight-correct {
             border-color: #f59e0b !important; /* Amber-500 for highlight, use !important to override other borders */
             box-shadow: 0 0 8px #f59e0b;
        }

        /* Utility class */
        .hidden {
           display: none;
        }

	.return-home-button {
            position: fixed; /* Keep the button in the same place on the screen */
            top: 1rem; /* 16px from the top */
            left: 1rem; /* 16px from the left */
            width: 48px; /* Set width */
            height: 48px; /* Set height */
            border-radius: 50%; /* Make it circular */
            background-color: #2563eb; /* Blue background color */
            color: white; /* White text/emoji color */
            display: flex; /* Use flexbox to center content */
            align-items: center; /* Vertically center content */
            justify-content: center; /* Horizontally center content */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Add a shadow */
            z-index: 50; /* Ensure it stays on top of other elements */
            text-decoration: none; /* Remove underline from link */
            font-size: 1.5rem; /* Adjust emoji size */
            transition: background-color 0.2s ease-in-out; /* Smooth transition for hover effect */
        }

        /* Hover effect for the button */
        .return-home-button:hover {
            background-color: #1d4ed8; /* Darker blue on hover */
        }
	    
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
	<a href="https://1001encore.github.io/experiments-homepage/home.html" class="return-home-button" aria-label="Anasayfaya Dön">
	↩
	</a>
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center text-blue-800 mb-6">TMT İz Sürme Testi</h1>

        <div id="test-container" class="bg-white rounded-lg shadow-lg p-6 max-w-7xl mx-auto"> <div id="instructions" class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Talimatlar:</h2>
                <p id="general-instruction" class="mb-4">Dairelere sırasıyla olabildiğince hızlı şekilde tıklayın.</p>
                <p id="training-instruction-part1" class="font-medium text-purple-700 hidden">Eğitim - 1. Bölüm: Aşağıdaki 5 daireye sırasıyla tıklayın: 1 → 2 → 3 → 4 → 5</p>
                 <p id="training-instruction-part2" class="font-medium text-purple-700 hidden">Eğitim - 2. Bölüm: Aşağıdaki 5 daireye sırasıyla tıklayın: 1 → A → 2 → B → 3</p>
                <p id="main-instruction-part1" class="font-medium text-blue-700 hidden">1. Bölüm: Bu sırayla tıklayın: 1 → 2 → 3 → 4 → ... → 24 → 25</p>
                <p id="main-instruction-part2" class="font-medium text-blue-700 hidden">2. Bölüm: Bu sırayla tıklayın: 1 → A → 2 → B → 3 → C → ... → L → 13</p>
            </div>

            <div class="flex justify-between items-center mb-4">
                <div id="timer" class="text-lg font-mono bg-gray-100 px-4 py-2 rounded">
                    Süre: <span id="time-display">00:00.0</span>
                </div>
                 <div id="accuracy-info" class="text-lg font-mono bg-gray-100 px-4 py-2 rounded hidden">
                     Doğruluk: <span id="accuracy-display">--</span>%
                 </div>
                <div id="progress" class="text-lg font-mono bg-gray-100 px-4 py-2 rounded">
                    İlerleme: <span id="progress-display">0</span>/<span id="total-nodes">0</span>
                </div>
            </div>

            <div id="test-area">
                <canvas id="connection-canvas"></canvas>
                <div id="node-container" class="node-container"></div>
            </div>

            <div class="flex justify-center mt-6">
                <button id="start-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition">
                    Testi Başlat
                </button>
                 <button id="start-part2-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition hidden ml-4">
                    2. Bölümü Başlat
                 </button>
                 <button id="next-training-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition hidden ml-4">
                     Ana Teste Geç
                 </button>
                <button id="reset-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition hidden ml-4">
                    Sıfırla
                </button>
            </div>
        </div>

         <div id="results-screen" class="bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto mt-8 hidden">
             <h2 class="text-2xl font-bold text-center text-green-700 mb-6">Test Bitti!</h2>
		 <h4 class="text-base mb-1" id="namesurname"></h4>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div class="bg-gray-100 p-4 rounded-lg">
                      <h3 class="text-xl font-semibold mb-3 text-blue-800">1. Bölüm Sonuçları</h3>
                       <p class="text-base mb-1 text-purple-800">Eğitim Süresi: <span id="training-part1-time" class="font-mono font-semibold">--:--.-</span></p>
                       <p class="text-base mb-2 text-purple-800">Eğitim Doğruluk: <span id="training-part1-accuracy" class="font-mono font-semibold">--</span>% (<span id="training-part1-correct">0</span>/<span id="training-part1-total">0</span>)</p>
                      <p class="text-lg mb-2">Ana Test Süresi: <span id="part1-time" class="font-mono font-semibold">--:--.-</span></p>
                      <p class="text-lg">Ana Test Doğruluk: <span id="part1-accuracy" class="font-mono font-semibold">--</span>% (<span id="part1-correct">0</span>/<span id="part1-total">0</span>)</p>
                 </div>
                 <div class="bg-gray-100 p-4 rounded-lg">
                      <h3 class="text-xl font-semibold mb-3 text-blue-800">2. Bölüm Sonuçları</h3>
                       <p class="text-base mb-1 text-purple-800">Eğitim Süresi: <span id="training-part2-time" class="font-mono font-semibold">--:--.-</span></p>
                       <p class="text-base mb-2 text-purple-800">Eğitim Doğruluk: <span id="training-part2-accuracy" class="font-mono font-semibold">--</span>% (<span id="training-part2-correct">0</span>/<span id="training-part2-total">0</span>)</p>
                      <p class="text-lg mb-2">Ana Test Süresi: <span id="part2-time" class="font-mono font-semibold">--:--.-</span></p>
                      <p class="text-lg">Ana Test Doğruluk: <span id="part2-accuracy" class="font-mono font-semibold">--</span>% (<span id="part2-correct">0</span>/<span id="part2-total">0</span>)</p>
                    </div>
                </div>
                <div class="flex justify-center mt-8">
                    <button id="restart-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition">
                        Tekrar Uygula
                    </button>
                </div>
                <br><br><br>
                 <div class="bg-gray-100 p-4 rounded-lg">
                      <h3 class="text-xl font-semibold mb-3 text-blue-800">Genel Sonuçlar</h3>
                      <p class="text-base mb-1">Toplam Süre: <span id="total-time" class="font-mono font-semibold">--:--.-</span></p>
                      <p class="text-base mb-1">Ortalama Doğruluk: <span id="average-accuracy" class="font-mono font-semibold">--</span>%</p>
                      <p class="text-base mb-1">Eğitim Süre Farkı: <span id="training-time-difference" class="font-mono font-semibold">--:--.-</span></p>
                      <p class="text-base mb-1">Test Süre Farkı: <span id="test-time-difference" class="font-mono font-semibold">--:--.-</span></p>
                      <p class="text-base mb-1">Eğitim Doğruluk Farkı: <span id="training-accuracy-difference" class="font-mono font-semibold">--</span>%</p>
                      <p class="text-base mb-1">Test Doğruluk Farkı: <span id="test-accuracy-difference" class="font-mono font-semibold">--</span>%</p>
                 </div>
                
                <div class="flex justify-center mt-8">
                    <button id="download-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition">
                        Sonuçları İndir
                    </button>
                </div>
           </div>
    </div>

    <script>
        const config={t:25,i:8,o:65,margin:15,u:{l:"bg-white border-2 border-blue-500 text-blue-800",m:"bg-green-100 border-2 border-green-500 text-green-800",error:"bg-red-100 border-2 border-red-500 text-red-800",p:"bg-gray-100 border-2 border-blue-500 text-blue-800 font-extrabold",g:"bg-white border-2 border-purple-500 text-purple-800",h:"bg-purple-100 border-2 border-purple-500 text-purple-800",T:"bg-red-100 border-2 border-red-500 text-red-800"},C:"1\n(başla)"};const turkishAlphabet=["A","B","C","Ç","D","E","F","G","Ğ","H","I","İ","J","K","L"];const mainPart1NodePositions={1:{x:62,y:72.2},2:{x:41,y:83.8},3:{x:72,y:83.8},4:{x:73.3,y:38},5:{x:46,y:49},6:{x:59,y:59.3},7:{x:41.3,y:65.8},8:{x:18.6,y:82.5},9:{x:24,y:91.6},10:{x:34.6,y:82.5},11:{x:46,y:94.2},12:{x:7.6,y:95.4},13:{x:14,y:52.9},14:{x:6,y:61.9},15:{x:6,y:12.2},16:{x:15.6,y:29},17:{x:33.3,y:6.4},18:{x:39.6,y:29},19:{x:63.6,y:21.9},20:{x:46,y:20},21:{x:52.3,y:5.1},22:{x:91,y:15.4},23:{x:93.3,y:90.3},24:{x:83,y:51.6},25:{x:79.3,y:94.1}};const trainingPart1NodePositions={1:{x:54.6,y:61.6},2:{x:63.8,y:24.6},3:{x:85.3,y:48},4:{x:72.3,y:57.7},5:{x:78.8,y:88.9},6:{x:21.5,y:80.5},7:{x:10.3,y:42.8},8:{x:39.2,y:41.5}};const trainingPart2NodePositions={1:{x:54.7,y:61.76},P:{x:63.2,y:25.2},2:{x:85.8,y:47.8},D:{x:72.6,y:57.3},3:{x:79.2,y:88.2},k:{x:21.6,y:80.1},4:{x:10.3,y:44.1},$:{x:39.1,y:38.2}};const mainPart2NodePositions={1:{x:50.6,y:42.6},P:{x:70.3,y:74.6},2:{x:36.6,y:70.6},D:{x:46.2,y:18.6},3:{x:57.3,y:30.6},k:{x:70.6,y:52},4:{x:70.6,y:14.1},$:{x:85.2,y:16},5:{x:85,y:58.6},B:{x:78.6,y:82.6},6:{x:54.3,y:80},E:{x:30,y:89.3},7:{x:23.6,y:44.6},I:{x:15.3,y:57.3},8:{x:12,y:5.8},A:{x:26.6,y:26.6},9:{x:26.6,y:12.6},N:{x:62.6,y:4.8},10:{x:93.3,y:5.3},S:{x:88.3,y:68},11:{x:93.3,y:92},v:{x:7.3,y:94.6},12:{x:5.6,y:48.8},M:{x:17.3,y:74.6}};let state={F:[],L:1,R:false,G:0,O:[],H:[],startTime:null,U:null,J:{time:"00:00.0",q:0,V:0},j:{time:"00:00.0",q:0,V:0},K:{time:"00:00.0",q:0,V:0},Y:{time:"00:00.0",q:0,V:0}};const testContainer=document.getElementById("test-container");const resultsScreen=document.getElementById("results-screen");const nameSurnameH4=document.getElementById("namesurname");const testArea=document.getElementById("test-area");const nodeContainer=document.getElementById("node-container");const connectionCanvas=document.getElementById("connection-canvas");const ctx=connectionCanvas.getContext("2d");const startBtn=document.getElementById("start-btn");const startPart2Btn=document.getElementById("start-part2-btn");const nextTrainingBtn=document.getElementById("next-training-btn");const resetBtn=document.getElementById("reset-btn");const restartBtn=document.getElementById("restart-btn");const timeDisplay=document.getElementById("time-display");const progressDisplay=document.getElementById("progress-display");const totalNodesDisplay=document.getElementById("total-nodes");const generalInstruction=document.getElementById("general-instruction");const trainingInstructionPart1=document.getElementById("training-instruction-part1");const trainingInstructionPart2=document.getElementById("training-instruction-part2");const mainInstructionPart1=document.getElementById("main-instruction-part1");const mainInstructionPart2=document.getElementById("main-instruction-part2");const accuracyInfo=document.getElementById("accuracy-info");const accuracyDisplay=document.getElementById("accuracy-display");const trainingPart1TimeDisp=document.getElementById("training-part1-time");const trainingPart1AccuracyDisp=document.getElementById("training-part1-accuracy");const trainingPart1CorrectDisp=document.getElementById("training-part1-correct");const trainingPart1TotalDisp=document.getElementById("training-part1-total");const part1TimeDisp=document.getElementById("part1-time");const part1AccuracyDisp=document.getElementById("part1-accuracy");const part1CorrectDisp=document.getElementById("part1-correct");const part1TotalDisp=document.getElementById("part1-total");const trainingPart2TimeDisp=document.getElementById("training-part2-time");const trainingPart2AccuracyDisp=document.getElementById("training-part2-accuracy");const trainingPart2CorrectDisp=document.getElementById("training-part2-correct");const trainingPart2TotalDisp=document.getElementById("training-part2-total");const part2TimeDisp=document.getElementById("part2-time");const part2AccuracyDisp=document.getElementById("part2-accuracy");const part2CorrectDisp=document.getElementById("part2-correct");const part2TotalDisp=document.getElementById("part2-total");function init(){resizeCanvas();setupEventListeners();resetTest()}function setupEventListeners(){startBtn.addEventListener("click",()=>startTraining(1));startPart2Btn.addEventListener("click",()=>startTraining(2));nextTrainingBtn.addEventListener("click",startMainTest);resetBtn.addEventListener("click",resetTest);restartBtn.addEventListener("click",resetTest);window.addEventListener("resize",handleResize)}function handleResize(){resizeCanvas()}function resizeCanvas(){connectionCanvas.width=testArea.clientWidth;connectionCanvas.height=testArea.clientHeight;updateNodePositions();if(state.H.length>0){drawConnections()}}function updateNodePositions(){const s=testArea.clientWidth;const i=testArea.clientHeight;const r=config.o/2;let o;if(state.R){o=state.L===1?trainingPart1NodePositions:trainingPart2NodePositions}else{o=state.L===1?mainPart1NodePositions:mainPart2NodePositions}state.F.forEach(t=>{const e=o[t.value];if(e){const n=e.x/100*s-r;const a=e.y/100*i-r;t.element.style.left=`${n}px`;t.element.style.top=`${a}px`;t.x=n+r;t.y=a+r}else{console.warn(`Position not found for node value ${t.value} during resize.`)}})}function resetUI(){timeDisplay.textContent="00:00.0";progressDisplay.textContent="0";totalNodesDisplay.textContent=config.t;generalInstruction.classList.remove("hidden");trainingInstructionPart1.classList.add("hidden");trainingInstructionPart2.classList.add("hidden");mainInstructionPart1.classList.add("hidden");mainInstructionPart2.classList.add("hidden");startBtn.classList.remove("hidden");startPart2Btn.classList.add("hidden");nextTrainingBtn.classList.add("hidden");resetBtn.classList.add("hidden");restartBtn.classList.add("hidden");accuracyInfo.classList.add("hidden");accuracyDisplay.textContent="--";testContainer.classList.remove("hidden");resultsScreen.classList.add("hidden");nodeContainer.innerHTML="";state.F=[];clearConnections()}function startTraining(t){resetUI();state.R=true;state.L=t;state.G=0;state.H=[];let e;let n;if(t===1){e=[1,2,3,4,5,6,7,8];n=trainingPart1NodePositions;trainingInstructionPart1.classList.remove("hidden");state.K={time:"00:00.0",q:0,V:0}}else{e=[1,"A",2,"B",3,"C",4,"Ç"];n=trainingPart2NodePositions;trainingInstructionPart2.classList.remove("hidden");state.Y={time:"00:00.0",q:0,V:0}}state.O=e;generateNodes(state.O,n);generalInstruction.classList.add("hidden");updateProgress();startBtn.classList.add("hidden");resetBtn.classList.remove("hidden");accuracyInfo.classList.remove("hidden");startTimer()}function startMainTest(){stopTimer();if(state.L===1){state.K.time=timeDisplay.textContent;const n=state.K.V>0?Math.round(state.K.q/state.K.V*100):0;state.K.accuracy=n}else{state.Y.time=timeDisplay.textContent;const n=state.Y.V>0?Math.round(state.Y.q/state.Y.V*100):0;state.Y.accuracy=n}nodeContainer.innerHTML="";state.F=[];clearConnections();state.R=false;state.G=0;state.H=[];let e;let t;if(state.L===1){e=Array.from({length:config.t},(t,e)=>e+1);t=mainPart1NodePositions;mainInstructionPart1.classList.remove("hidden");trainingInstructionPart1.classList.add("hidden");state.J={time:"00:00.0",q:0,V:0}}else{e=[];const a=12;const s=12;for(let t=0;t<config.t;t++){if(t%2===0){const i=Math.floor(t/2)+1;if(i<=a){e.push(i)}}else{const r=Math.floor(t/2);if(r<s){e.push(turkishAlphabet[r])}}}e=e.slice(0,config.t);t=mainPart2NodePositions;mainInstructionPart2.classList.remove("hidden");trainingInstructionPart2.classList.add("hidden");state.j={time:"00:00.0",q:0,V:0}}state.O=e;generateNodes(state.O,t);updateProgress();nextTrainingBtn.classList.add("hidden");resetBtn.classList.remove("hidden");updateAccuracyDisplay();startTimer()}function resetTest(){stopTimer();resetUI();state={F:[],L:1,R:false,G:0,O:[],H:[],startTime:null,U:null,J:{time:"00:00.0",q:0,V:0},j:{time:"00:00.0",q:0,V:0},K:{time:"00:00.0",q:0,V:0},Y:{time:"00:00.0",q:0,V:0}};startBtn.classList.remove("hidden")}function generateNodes(t,i){nodeContainer.innerHTML="";state.F=[];const r=testArea.clientWidth;const o=testArea.clientHeight;const e=config.o;const c=e/2;t.forEach(t=>{const e=i[t];if(!e){console.error(`Fixed position not found for value: ${t} in the provided map.`);return}const n=e.x/100*r-c;const a=e.y/100*o-c;const s=document.createElement("div");s.className=`node ${state.R?config.u.g:config.u.l}`;s.style.left=`${n}px`;s.style.top=`${a}px`;s.dataset.value=t;s.textContent=t;s.addEventListener("click",handleNodeClick);nodeContainer.appendChild(s);state.F.push({element:s,value:t,x:n+c,y:a+c})});updateNodeLabelsAndValues();totalNodesDisplay.textContent=state.F.length}function updateNodeLabelsAndValues(){const s=state.O;const i=s[s.length-1];state.F.forEach(t=>{const e=t.value;let n=e;let a=`node ${state.R?config.u.g:config.u.l}`;if(e==s[0]){n=`${e}\n(başla)`;a=`node ${config.u.p}`}else if(e==i){n=`${e}\n(bitir)`;a=`node ${config.u.p}`}else{a=`node ${state.R?config.u.g:config.u.l}`}t.element.className=a;t.element.textContent=n})}function handleNodeClick(t){if(state.startTime===null)return;const e=t.target;const n=state.F.find(t=>t.element===e);if(!n||n.value===null){console.warn("Clicked on an unassigned node.");return}const a=n.value;const s=state.O[state.G];if(state.R){if(state.L===1)state.K.V++;else state.Y.V++}else{if(state.L===1)state.J.V++;else state.j.V++}updateAccuracyDisplay();if(a==s){handleCorrectTap(n)}else{handleIncorrectTap(e)}}function updateAccuracyDisplay(){let t,e;if(state.R){if(state.L===1){t=state.K.q;e=state.K.V}else{t=state.Y.q;e=state.Y.V}}else{if(state.L===1){t=state.J.q;e=state.J.V}else{t=state.j.q;e=state.j.V}}const n=e>0?Math.round(t/e*100):0;accuracyDisplay.textContent=n;accuracyInfo.classList.remove("hidden")}function handleCorrectTap(t){if(state.R){if(state.L===1)state.K.q++;else state.Y.q++}else{if(state.L===1)state.J.q++;else state.j.q++}updateAccuracyDisplay();state.H.push(t);const e=t.value==state.O[0];const n=t.value==state.O[state.O.length-1];if(!e&&!n){t.element.className=`node ${state.R?config.u.h:config.u.m}`}else if(n&&state.G===state.O.length-1){t.element.className=`node ${state.R?config.u.h:config.u.m}`}if(state.H.length>1){drawConnections()}state.G++;updateProgress();if(state.G>=state.O.length){if(state.R){handleTrainingComplete()}else{handleMainTestPartComplete()}}}function handleIncorrectTap(t){const e=t.className;const n=e.includes(config.u.p.split(" ")[0]);t.classList.add("error-shake");if(!n){t.className=`node ${state.R?config.u.T:config.u.error}`}if(state.R){const a=state.O[state.G];const s=state.F.find(t=>t.value==a);if(s){s.element.classList.add("highlight-correct");setTimeout(()=>{s.element.classList.remove("highlight-correct");if(!n){t.className=e}},1e3)}else{if(!n){setTimeout(()=>{t.className=e},500)}}}else{if(!n){setTimeout(()=>{t.className=e},500)}}setTimeout(()=>{t.classList.remove("error-shake")},500)}function handleTrainingComplete(){stopTimer();const t=timeDisplay.textContent;if(state.L===1){state.K.time=t}else{state.Y.time=t}nextTrainingBtn.classList.remove("hidden");resetBtn.classList.add("hidden");accuracyInfo.classList.add("hidden");nodeContainer.innerHTML="";state.F=[];clearConnections();if(state.L===1){trainingInstructionPart1.textContent="Eğitim Tamamlandı! Ana Teste Geçmek İçin 'Ana Teste Geç' Butonuna Tıklayın."}else{trainingInstructionPart2.textContent="Eğitim Tamamlandı! Ana Teste Geçmek İçin 'Ana Teste Geç' Butonuna Tıklayın."}}function handleMainTestPartComplete(){const t=timeDisplay.textContent;stopTimer();if(state.L===1){state.J.time=t;const e=state.J.V>0?Math.round(state.J.q/state.J.V*100):0;state.J.accuracy=e;accuracyInfo.classList.add("hidden");if(state.L===1){startPart2Btn.classList.remove("hidden")}resetBtn.classList.add("hidden")}else{state.j.time=t;const n=state.j.V>0?Math.round(state.j.q/state.j.V*100):0;state.j.accuracy=n;accuracyInfo.classList.add("hidden");resetBtn.classList.add("hidden");displayResults()}}function displayResults(){const t=sessionStorage.getItem("confirmationFormData");const e=JSON.parse(t);const n=e["userName"];testContainer.classList.add("hidden");resultsScreen.classList.remove("hidden");restartBtn.classList.remove("hidden");nameSurnameH4.textContent="(Ad-Soyad: "+n+")";trainingPart1TimeDisp.textContent=state.K.time;trainingPart1AccuracyDisp.textContent=state.K.accuracy;trainingPart1CorrectDisp.textContent=state.K.q;trainingPart1TotalDisp.textContent=state.K.V;part1TimeDisp.textContent=state.J.time;part1AccuracyDisp.textContent=state.J.accuracy;part1CorrectDisp.textContent=state.J.q;part1TotalDisp.textContent=state.J.V;trainingPart2TimeDisp.textContent=state.Y.time;trainingPart2AccuracyDisp.textContent=state.Y.accuracy;trainingPart2CorrectDisp.textContent=state.Y.q;trainingPart2TotalDisp.textContent=state.Y.V;part2TimeDisp.textContent=state.j.time;part2AccuracyDisp.textContent=state.j.accuracy;part2CorrectDisp.textContent=state.j.q;part2TotalDisp.textContent=state.j.V;const a=timeToMs(state.K.time)+timeToMs(state.Y.time)+timeToMs(state.J.time)+timeToMs(state.j.time);const s=msToTime(a);const i=state.K.q+state.Y.q+state.J.q+state.j.q;const r=state.K.V+state.Y.V+state.J.V+state.j.V;const o=r>0?Math.round(i/r*100):0;const c=timeToMs(state.Y.time)-timeToMs(state.K.time);const d=msToTime(c);const u=timeToMs(state.j.time)-timeToMs(state.J.time);const l=msToTime(u);const m=state.K.accuracy!=0?Math.round((state.Y.accuracy-state.K.accuracy)/state.K.accuracy*100):0;const p=state.J.accuracy!=0?Math.round((state.j.accuracy-state.J.accuracy)/state.J.accuracy*100):0;document.getElementById("total-time").textContent=s;document.getElementById("average-accuracy").textContent=o;document.getElementById("training-time-difference").textContent=d;document.getElementById("test-time-difference").textContent=l;document.getElementById("training-accuracy-difference").textContent=m;document.getElementById("test-accuracy-difference").textContent=p;function timeToMs(t){const[e,n]=t.split(":");const[a,s]=n.split(".");return(parseInt(e)*60+parseInt(a))*1e3+parseInt(s)*100}function msToTime(t){const e=Math.floor(t/(1e3*60)).toString().padStart(2,"0");const n=Math.floor(t/1e3%60).toString().padStart(2,"0");const a=Math.floor(t%1e3/100).toString();return`${e}:${n}.${a}`}}function drawConnections(){ctx.clearRect(0,0,connectionCanvas.width,connectionCanvas.height);ctx.strokeStyle="#10b981";ctx.lineWidth=3;ctx.lineCap="round";for(let t=1;t<state.H.length;t++){const e=state.H[t-1];const n=state.H[t];ctx.beginPath();ctx.moveTo(e.x,e.y);ctx.lineTo(n.x,n.y);ctx.stroke()}}function clearConnections(){ctx.clearRect(0,0,connectionCanvas.width,connectionCanvas.height)}function updateProgress(){progressDisplay.textContent=state.G;totalNodesDisplay.textContent=state.O.length}function startTimer(){stopTimer();state.startTime=Date.now();state.U=setInterval(updateTimer,100);updateTimer()}function stopTimer(){clearInterval(state.U);state.U=null;state.startTime=null}function updateTimer(){if(!state.startTime){timeDisplay.textContent="00:00.0";return}const t=Date.now()-state.startTime;const e=Math.floor(t/1e3);const n=Math.floor(e/60).toString().padStart(2,"0");const a=(e%60).toString().padStart(2,"0");const s=Math.floor(t%1e3/100).toString();timeDisplay.textContent=`${n}:${a}.${s}`}window.addEventListener("DOMContentLoaded",init);function downloadResults(){const t=sessionStorage.getItem("confirmationFormData");const e=JSON.parse(t);const n=e["userName"];const a=e["telNumber"];const s=e["birthDate"];const i=e["question1"];const r=e["question1Details"];const o=e["question2"];const c=e["sex"];const d=document.getElementById("part1-time").textContent;const u=document.getElementById("part1-accuracy").textContent;const l=document.getElementById("part2-time").textContent;const m=document.getElementById("part2-accuracy").textContent;const p=document.getElementById("training-part1-time").textContent;const y=document.getElementById("training-part1-accuracy").textContent;const g=document.getElementById("training-part2-time").textContent;const f=document.getElementById("training-part2-accuracy").textContent;const x=document.getElementById("total-time").textContent;const h=document.getElementById("average-accuracy").textContent;const T=document.getElementById("training-time-difference").textContent;const C=document.getElementById("test-time-difference").textContent;const P=document.getElementById("training-accuracy-difference").textContent;const D=document.getElementById("test-accuracy-difference").textContent;let k=text+=`Ad-Soyad: ${n}\n`;k+=`Telefon Numarası: ${a}\n\n`;k+=`Doğum Tarihi: ${s}\n`;k+=`Cinsiyeti: ${c}\n`;k+=`Son iki ayda herhangi bir psikiyatrik veya psikolojik tedavi görmüş mü?: ${i}\n`;k+=`Yukarıdaki soruya cevabınız “Evet” ise bu tedaviler gereği herhangi bir ilaç kullandınız mı yazınız: ${r}\n`;k+=`Renk körlüğü ya da görme bozukluğu var mı?: ${o}\n\n`;k+=`1. Bölüm Eğitim Süresi: ${p}\n`;k+=`1. Bölüm Eğitim Doğruluğu: ${y}\n`;k+=`1. Bölüm Süresi: ${d}\n`;k+=`1. Bölüm Doğruluğu: ${u}\n\n`;k+=`2. Bölüm Eğitim Süresi: ${g}\n`;k+=`2. Bölüm Eğitim Doğruluğu: ${f}\n`;k+=`2. Bölüm Süresi: ${l}\n`;k+=`2. Bölüm Doğruluğu: ${m}\n\n`;k+=`Toplam Süre: ${x}\n`;k+=`Ortalama Doğruluk: ${h}\n`;k+=`Eğitimler Arası Süre Farkı: ${T}\n`;k+=`Bölümler Arası Süre Farkı: ${C}\n`;k+=`Bölümler Arası Doğruluk Farkı: ${P}\n`;k+=`Eğitimler Arası Doğruluk Farkı: ${D}\n`;const b="tmt_sonuçlar.txt";const $=document.createElement("a");$.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(k));$.setAttribute("download",b);$.style.display="none";document.body.appendChild($);$.click();document.body.removeChild($)}document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("download-btn");t.addEventListener("click",downloadResults)});
    </script>
</body>
</html>
